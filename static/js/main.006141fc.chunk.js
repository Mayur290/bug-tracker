(this.webpackJsonpfrontendapp=this.webpackJsonpfrontendapp||[]).push([[0],{18:function(e,t,a){},40:function(e,t,a){e.exports=a(70)},45:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),l=a.n(o),s=a(5),c=(a(45),a(8)),i=a(9),m=a(11),u=a(10),p=(a(18),a(16)),d=a(14),g=a.n(d),h=a(17),E=a.n(h),f=a(19),b=a(35),v=a(39);function w(e){var t={};t.username=e.username,t.password=e.password,console.log(t);g.a.post("https://bug-tracker01.herokuapp.com/api/auth",E.a.stringify(t),{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){console.log("token: ".concat(e.data.token)),console.log("logged in"),document.cookie="Token=".concat(e.data.token),localStorage.setItem("token",e.data.token)}),(function(e){console.log(e)}))}var j=a(1),k=RegExp(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=Object(p.a)(n);if(function(e){var t=e.formErrors,a=Object(v.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach((function(e){e.length>0&&(n=!1)})),Object.values(a).forEach((function(e){null===e&&(n=!1)})),n}(n.state)){var a={};a.first_name=n.state.first_name,a.last_name=n.state.last_name,a.email=n.state.email,a.password=n.state.password,console.log("after form validation"),console.log(a);g.a.post("https://bug-tracker01.herokuapp.com/api/signup",E.a.stringify(a),{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e.data);var t={};t.password=n.state.password,t.username=e.data.username,console.log(t),w(t)}),(function(e){console.log(e),console.log("signup error"),t.setState({error:!0}),setTimeout((function(){t.setState({error:!1})}),5e3)}))}else console.error("FORM INVALID - DISPLAY ERROR MESSAGE")},n.handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value,o=Object(b.a)({},n.state.formErrors);switch(a){case"first_name":o.first_name=r.length<3?"minimum 3 characaters required":"";break;case"last_name":o.last_name=r.length<3?"minimum 3 characaters required":"";break;case"email":o.email=k.test(r)?"":"invalid email address";break;case"password":o.password=r.length<6?"minimum 6 characaters required":""}n.setState(Object(f.a)({formErrors:o},a,r))},n.state={first_name:null,last_name:null,email:null,password:null,error:!1,formErrors:{first_name:"",last_name:"",email:"",password:""}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement(r.a.Fragment,null,this.state.error&&r.a.createElement("span",null,"Error Occured"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",null,"Create Account"),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"first_name"},r.a.createElement("label",{htmlFor:"first_name"},"First Name"),r.a.createElement("input",{className:e.first_name.length>0?"error":null,placeholder:"First Name",type:"text",name:"first_name",noValidate:!0,onChange:this.handleChange}),e.first_name.length>0&&r.a.createElement("span",{className:"errorMessage"},e.first_name)),r.a.createElement("div",{className:"last_name"},r.a.createElement("label",{htmlFor:"last_name"},"Last Name"),r.a.createElement("input",{className:e.last_name.length>0?"error":null,placeholder:"Last Name",type:"text",name:"last_name",noValidate:!0,onChange:this.handleChange}),e.last_name.length>0&&r.a.createElement("span",{className:"errorMessage"},e.last_name)),r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:e.email.length>0?"error":null,placeholder:"Email",type:"email",name:"email",noValidate:!0,onChange:this.handleChange}),e.email.length>0&&r.a.createElement("span",{className:"errorMessage"},e.email)),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:e.password.length>0?"error":null,placeholder:"Password",type:"password",name:"password",noValidate:!0,onChange:this.handleChange}),e.password.length>0&&r.a.createElement("span",{className:"errorMessage"},e.password)),r.a.createElement("div",{className:"createAccount"},r.a.createElement("button",{type:"submit"},"Create Account"),this.state.error&&r.a.createElement("small",{style:{color:"red",fontWeight:"bold"}}," ","Email address already exists"," "),r.a.createElement("small",null,"Already Have an Account? \u2003\u2003",r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement(s.a,null,r.a.createElement(j.b,{path:"/login",component:y})))))))}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={credentials:{email:"",password:""},error:!1},n.handleLogin=function(e){e.preventDefault();var t=Object(p.a)(n);g.a.post("https://bug-tracker01.herokuapp.com/api/login",E.a.stringify(n.state.credentials),{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e.data);var t={};t.password=n.state.credentials.password,t.username=e.data.username,n.props.isLoggedin(!0),w(t)}),(function(e){console.log(e),console.log("login error"),n.props.isLoggedin(!1),t.setState({error:!0}),setTimeout((function(){t.setState({error:!1})}),5e3)}))},n.inputChanged=function(e){var t=n.state.credentials;t[e.target.name]=e.target.value,n.setState({credentials:t})},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.error&&r.a.createElement("span",null,"Please provide correct credentials"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleLogin,noValidate:!0},r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{placeholder:"Email",type:"email",name:"email",id:"email",noValidate:!0,value:this.state.credentials.email,onChange:this.inputChanged})),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",id:"password",noValidate:!0,value:this.state.credentials.password,onChange:this.inputChanged})),r.a.createElement("div",{className:"createAccount"},r.a.createElement("button",{type:"submit"},"Login"),this.state.error&&r.a.createElement("small",{style:{color:"red",fontWeight:"bold"}}," ","Please provide correct credentials"," "),r.a.createElement("small",null,"New here ? \u2003\u2003",r.a.createElement(s.b,{to:"/signup"},"SignUp")," "),r.a.createElement(s.a,null,r.a.createElement(j.b,{path:"/signup",component:O})))))))}}]),a}(n.Component),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={credentials:{name:"",description:""},output:{}},e.inputChanged=function(t){var a=e.state.credentials;a[t.target.name]=t.target.value,e.setState({credentials:a})},e.proj=function(t){fetch("https://bug-tracker01.herokuapp.com/api/user/project",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(localStorage.getItem("token"))},body:JSON.stringify(e.state.credentials)}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.error(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Project "),r.a.createElement("label",null," ","project names:",r.a.createElement("input",{type:"text",name:"name",value:this.state.credentials.name,onChange:this.inputChanged})),r.a.createElement("br",null),r.a.createElement("label",null," ","project description:",r.a.createElement("input",{type:"text",name:"description",value:this.state.credentials.description,onChange:this.inputChanged})),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.proj},"Add project"))}}]),a}(n.Component),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).handleLogout=function(e){n.props.logout(),g.a.get("https://bug-tracker01.herokuapp.com/api/logout",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((function(e){console.log("logout successful"),localStorage.removeItem("token")}),(function(e){console.log("Token ".concat(localStorage.getItem("token"))),console.log("logout error")})).catch((function(e){e.response&&(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers))}))};var r=!0;return null==localStorage.getItem("token")&&(r=!1),n.state={loggedIn:r},n.handleLogout(),n}return Object(i.a)(a,[{key:"render",value:function(){return 0==this.state.loggedIn?r.a.createElement(j.a,{to:"/"}):null}}]),a}(n.Component),S=(n.Component,function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).isLoggedin=function(e){console.log("isLoggedin value is "+e),n.setState({loggedIn:e})},n.logout=function(){n.setState({loggedIn:!1}),console.log("Logout getting called!")};var r=!0;return null==localStorage.getItem("token")&&(r=!1),n.state={loggedIn:r},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.loggedIn;return r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("h1",null," Home page"),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/"},"Home")),t?r.a.createElement("li",null,r.a.createElement(s.b,{to:"/logout"},"Logout")):r.a.createElement("li",null,r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/project"},"Project")))),r.a.createElement(j.d,null,r.a.createElement(j.b,{path:"/signup",component:O}),r.a.createElement(j.b,{path:"/project",component:C}),r.a.createElement(j.b,{path:"/login",exact:!0,render:function(){return r.a.createElement(y,{isLoggedin:e.isLoggedin})}}),r.a.createElement(j.b,{path:"/logout",render:function(t){return r.a.createElement(N,Object.assign({},t,{logout:e.logout}))}}),r.a.createElement(j.b,{path:"/",exact:!0,render:function(){return r.a.createElement(y,{isLoggedin:e.isLoggedin})}}))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(38),L=a(37),A={position:"bottom center",timeout:5e3,offset:"30px",transition:"scale"},I=function(){return r.a.createElement(_.a,Object.assign({template:L.a},A),r.a.createElement(S,null))};l.a.render(r.a.createElement(s.a,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.006141fc.chunk.js.map