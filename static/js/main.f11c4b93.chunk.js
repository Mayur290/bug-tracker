(this.webpackJsonpfrontendapp=this.webpackJsonpfrontendapp||[]).push([[0],{20:function(e,t,a){},44:function(e,t,a){e.exports=a(73)},49:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(17),o=a.n(r),c=a(10),s=(a(49),a(4)),i=a(5),m=a(7),u=a(6),d=(a(20),a(15)),p=a(9),g=a.n(p),E=a(16),h=a.n(E),f=a(18),b=a(39),v=a(22);function k(e){var t={};t.username=e.username,t.password=e.password,console.log(t);g.a.post("https://bug-tracker01.herokuapp.com/api/auth",h.a.stringify(t),{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){console.log("token: ".concat(t.data.token)),console.log("logged in"),document.cookie="Token=".concat(t.data.token),localStorage.setItem("token",t.data.token),"89fe33e3ac004bb8b62a4e55f092a0"==e.username?window.location.href="/companyDashboard":window.location.href="/clientDashboard"}),(function(e){console.log(e)}))}var j=a(1),w=RegExp(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=Object(d.a)(n);if(function(e){var t=e.formErrors,a=Object(v.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach((function(e){e.length>0&&(n=!1)})),Object.values(a).forEach((function(e){null===e&&(n=!1)})),n}(n.state)){var a={};a.first_name=n.state.first_name,a.last_name=n.state.last_name,a.email=n.state.email,a.password=n.state.password,console.log("after form validation"),console.log(a);g.a.post("https://bug-tracker01.herokuapp.com/api/signup",h.a.stringify(a),{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e.data);var t={};t.password=n.state.password,t.username=e.data.username,console.log(t),k(t)}),(function(e){console.log(e),console.log("signup error"),t.setState({error:!0}),setTimeout((function(){t.setState({error:!1})}),5e3)}))}else console.error("FORM INVALID - DISPLAY ERROR MESSAGE")},n.handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,l=t.value,r=Object(b.a)({},n.state.formErrors);switch(a){case"first_name":r.first_name=l.length<3?"minimum 3 characaters required":"";break;case"last_name":r.last_name=l.length<3?"minimum 3 characaters required":"";break;case"email":r.email=w.test(l)?"":"invalid email address";break;case"password":r.password=l.length<6?"minimum 6 characaters required":""}n.setState(Object(f.a)({formErrors:r},a,l))},n.state={first_name:null,last_name:null,email:null,password:null,error:!1,formErrors:{first_name:"",last_name:"",email:"",password:""}},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.formErrors;return l.a.createElement(l.a.Fragment,null,this.state.error&&l.a.createElement("span",null,"Error Occured"),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"form-wrapper"},l.a.createElement("h1",null,"Create Account"),l.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},l.a.createElement("div",{className:"first_name"},l.a.createElement("label",{htmlFor:"first_name"},"First Name"),l.a.createElement("input",{className:e.first_name.length>0?"error":null,placeholder:"First Name",type:"text",name:"first_name",noValidate:!0,onChange:this.handleChange}),e.first_name.length>0&&l.a.createElement("span",{className:"errorMessage"},e.first_name)),l.a.createElement("div",{className:"last_name"},l.a.createElement("label",{htmlFor:"last_name"},"Last Name"),l.a.createElement("input",{className:e.last_name.length>0?"error":null,placeholder:"Last Name",type:"text",name:"last_name",noValidate:!0,onChange:this.handleChange}),e.last_name.length>0&&l.a.createElement("span",{className:"errorMessage"},e.last_name)),l.a.createElement("div",{className:"email"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{className:e.email.length>0?"error":null,placeholder:"Email",type:"email",name:"email",noValidate:!0,onChange:this.handleChange}),e.email.length>0&&l.a.createElement("span",{className:"errorMessage"},e.email)),l.a.createElement("div",{className:"password"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{className:e.password.length>0?"error":null,placeholder:"Password",type:"password",name:"password",noValidate:!0,onChange:this.handleChange}),e.password.length>0&&l.a.createElement("span",{className:"errorMessage"},e.password)),l.a.createElement("div",{className:"createAccount"},l.a.createElement("button",{type:"submit"},"Create Account"),this.state.error&&l.a.createElement("small",{style:{color:"red",fontWeight:"bold"}}," ","Email address already exists"," "),l.a.createElement("small",null,"Already Have an Account? \u2003\u2003",l.a.createElement(c.b,{to:"/login"},"Login")),l.a.createElement(c.a,null,l.a.createElement(j.b,{path:"/login",component:y})))))))}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={credentials:{email:"",password:""},error:!1},n.handleLogin=function(e){e.preventDefault();var t=Object(d.a)(n);g.a.post("https://bug-tracker01.herokuapp.com/api/login",h.a.stringify(n.state.credentials),{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e.data);var t={};t.password=n.state.credentials.password,t.username=e.data.username,n.props.isLoggedin(!0),k(t)}),(function(e){console.log(e),console.log("login error"),n.props.isLoggedin(!1),t.setState({error:!0}),setTimeout((function(){t.setState({error:!1})}),5e3)}))},n.inputChanged=function(e){var t=n.state.credentials;t[e.target.name]=e.target.value,n.setState({credentials:t})},n}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.error&&l.a.createElement("span",null,"Please provide correct credentials"),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"form-wrapper"},l.a.createElement("h1",null,"Login"),l.a.createElement("form",{onSubmit:this.handleLogin,noValidate:!0},l.a.createElement("div",{className:"email"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{placeholder:"Email",type:"email",name:"email",id:"email",noValidate:!0,value:this.state.credentials.email,onChange:this.inputChanged})),l.a.createElement("div",{className:"password"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{placeholder:"Password",type:"password",name:"password",id:"password",noValidate:!0,value:this.state.credentials.password,onChange:this.inputChanged})),l.a.createElement("div",{className:"createAccount"},l.a.createElement("button",{type:"submit"},"Login"),this.state.error&&l.a.createElement("small",{style:{color:"red",fontWeight:"bold"}}," ","Please provide correct credentials"," "),l.a.createElement("small",null,"New here ? \u2003\u2003",l.a.createElement(c.b,{to:"/signup"},"SignUp")," "),l.a.createElement(c.a,null,l.a.createElement(j.b,{path:"/signup",component:O})))))))}}]),a}(n.Component),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={credentials:{name:"",description:""},output:{}},e.inputChanged=function(t){var a=e.state.credentials;a[t.target.name]=t.target.value,e.setState({credentials:a})},e.proj=function(t){fetch("https://bug-tracker01.herokuapp.com/api/user/project",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(localStorage.getItem("token"))},body:JSON.stringify(e.state.credentials)}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.error(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Project "),l.a.createElement("label",null," ","project names:",l.a.createElement("input",{type:"text",name:"name",value:this.state.credentials.name,onChange:this.inputChanged})),l.a.createElement("br",null),l.a.createElement("label",null," ","project description:",l.a.createElement("input",{type:"text",name:"description",value:this.state.credentials.description,onChange:this.inputChanged})),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.proj},"Add project"))}}]),a}(n.Component),I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleLogout=function(e){n.props.logout(),g.a.get("https://bug-tracker01.herokuapp.com/api/logout",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then((function(e){console.log("logout successful"),localStorage.removeItem("token")}),(function(e){console.log("Token ".concat(localStorage.getItem("token"))),console.log("logout error")})).catch((function(e){e.response&&(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers))}))};var l=!0;return null==localStorage.getItem("token")&&(l=!1),n.state={loggedIn:l},n.handleLogout(),n}return Object(i.a)(a,[{key:"render",value:function(){return 0==this.state.loggedIn?l.a.createElement(j.a,{to:"/"}):null}}]),a}(n.Component),S=a(43),N=a(19),D=a.n(N);a(21);var T=function(){var e;return Object(n.useEffect)((function(){})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"row"},l.a.createElement("form",{class:"col s12",onSubmit:function(e){!function(e){e.preventDefault();var t={name:e.target.first_name.value,description:e.target.description.value};console.log(t);var a={headers:{"content-type":"application/x-www-form-urlencoded",Authorization:"Token "+localStorage.getItem("token")}};g.a.post("https://bug-tracker01.herokuapp.com/api/user/project",h.a.stringify(t),a).then((function(e){console.log("Response "+JSON.stringify(e))}),(function(e){console.log(e)}))}(e)}},l.a.createElement("div",{class:"row"},l.a.createElement("div",{class:"input-field col s12"},l.a.createElement("input",{placeholder:"Title",id:"first_name",type:"text",class:"validate"}),l.a.createElement("label",{for:"first_name"},"Title")),l.a.createElement("div",{class:"input-field col s12"},l.a.createElement("input",(e={id:"last_name"},Object(f.a)(e,"id","description"),Object(f.a)(e,"type","text"),Object(f.a)(e,"class","validate"),e)),l.a.createElement("label",{for:"last_name"},"Description")),l.a.createElement("div",{class:"modal-close "},l.a.createElement("input",{type:"Submit",value:"Submit"}))))))},_=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),console.log(e),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={onOpenStart:function(){console.log(e.props.data)},onOpenEnd:function(){},onCloseStart:function(){},onCloseEnd:function(){},inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"};D.a.Modal.init(this.Modal,t)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{className:"waves-effect waves-light btn modal-trigger","data-target":"modal3"},"Create Project"),l.a.createElement("div",{ref:function(t){e.Modal=t},id:"modal3",className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement(T,null)),l.a.createElement("div",{class:"modal-footer"},l.a.createElement("a",{href:"#",class:"modal-close waves-effect waves-green btn-flat"},"Cancel"))))}}]),a}(n.Component),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getTicketData=function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};console.log(n.props.projectId);var t="https://bug-tracker01.herokuapp.com/api/user/project/"+n.props.projectId+"/ticket/"+n.props.ticketId+"/";g.a.get(t,e).then((function(e){console.log(e.data),n.setState({ticketInfo:e.data})}),(function(e){console.log(e)}))},console.log(e),n.getTicketData=n.getTicketData.bind(Object(d.a)(n)),n.state={ticketInfo:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={onOpenStart:function(){console.log(e.props.data)},onOpenEnd:function(){},onCloseStart:function(){},onCloseEnd:function(){},inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"};D.a.Modal.init(this.Modal,t),this.getTicketData()}},{key:"render",value:function(){var e=this;this.props.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{className:"waves-effect waves-light btn modal-trigger","data-target":"modal4"},"Info"),l.a.createElement("div",{ref:function(t){e.Modal=t},id:"modal4",className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("button",null,"Delete"),this.state.ticketInfo&&l.a.createElement("table",null,l.a.createElement("thead",null),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Id"),l.a.createElement("td",null,this.state.ticketInfo.id)),l.a.createElement("tr",null,l.a.createElement("td",null,"Title"),l.a.createElement("td",null,this.state.ticketInfo.title)),l.a.createElement("tr",null,l.a.createElement("td",null,"Description"),l.a.createElement("td",null,this.state.ticketInfo.description)),l.a.createElement("tr",null,l.a.createElement("td",null,"Priority"),l.a.createElement("td",null,this.state.ticketInfo.priority)),l.a.createElement("tr",null,l.a.createElement("td",null,"Status"),l.a.createElement("td",null,this.state.ticketInfo.status)),l.a.createElement("tr",null,l.a.createElement("td",null,"CreatedDate"),l.a.createElement("td",null,this.state.ticketInfo.CreatedDate)),l.a.createElement("tr",null,l.a.createElement("td",null,"Project"),l.a.createElement("td",null,this.state.ticketInfo.project)),l.a.createElement("tr",null,l.a.createElement("td",null,"Users"),l.a.createElement("td",null,this.state.ticketInfo.users))))),l.a.createElement("div",{class:"modal-footer"},l.a.createElement("a",{href:"#",class:"modal-close waves-effect waves-green btn-flat"},"Okay"))))}}]),a}(n.Component),A=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getTicketInfo=function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};console.log(n.props.projectId);var t="https://bug-tracker01.herokuapp.com/api/user/project/"+n.props.projectId+"/ticket/";g.a.get(t,e).then((function(e){console.log(e.data),n.setState({ticketData:e.data})}),(function(e){console.log(e)}))},console.log(e),n.getTicketInfo=n.getTicketInfo.bind(Object(d.a)(n)),n.state={ticketData:"",id:e.projectId},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={onOpenStart:function(){console.log(e.props.data),e.getTicketInfo()},onOpenEnd:function(){},onCloseStart:function(){},onCloseEnd:function(){},inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"};D.a.Modal.init(this.Modal,t)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{className:"waves-effect waves-light btn modal-trigger","data-target":this.state.id},"View"),l.a.createElement("div",{ref:function(t){e.Modal=t},id:this.state.id,className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"View"))),l.a.createElement("tbody",null,this.state.ticketData&&this.state.ticketData.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.title),l.a.createElement("td",null,t.description),l.a.createElement("td",null,t.status),l.a.createElement("td",null," ",l.a.createElement(L,{projectId:e.props.projectId,ticketId:t.id})))}))))),l.a.createElement("div",{class:"modal-footer"},l.a.createElement("a",{href:"#",class:"modal-close waves-effect waves-green btn-flat"},"Cancel"))))}}]),a}(n.Component);var M=function(){var e=Object(n.useState)(""),t=Object(S.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e={headers:{Authorization:"Token "+localStorage.getItem("token")}};g.a.get("https://bug-tracker01.herokuapp.com/api/user/project",e).then((function(e){console.log(e.data),r(e.data)}),(function(e){console.log(e)}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement(_,null),l.a.createElement("br",null),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Project"),l.a.createElement("th",null,"Description "),l.a.createElement("th",null,"View "))),l.a.createElement("tbody",null,a&&a.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.description),l.a.createElement("td",null,l.a.createElement(A,{projectId:e.id})))}))))))};var x=function(){return Object(n.useEffect)((function(){})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement("br",null),"Company Dashboard",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Client"),l.a.createElement("th",null,"Projects"),l.a.createElement("th",null,"View"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Client1"),l.a.createElement("td",null,"2"),l.a.createElement("td",null,l.a.createElement("button",null,"View"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Client2"),l.a.createElement("td",null,"3"),l.a.createElement("td",null,l.a.createElement("button",null,"View"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Client3"),l.a.createElement("td",null,"2"),l.a.createElement("td",null,l.a.createElement("button",null,"View")))))))},F=(n.Component,function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.component,a=Object(v.a)(e,["component"]);return l.a.createElement(j.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?l.a.createElement(t,e):l.a.createElement(j.a,{to:"/login"})}}))}}]),a}(n.Component));function V(){return l.a.createElement("div",null,"NoMatch")}var P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).isLoggedin=function(e){console.log("isLoggedin value is "+e),n.setState({loggedIn:e})},n.logout=function(){n.setState({loggedIn:!1}),console.log("Logout getting called!")};var l=!0;return null==localStorage.getItem("token")&&(l=!1),n.state={loggedIn:l},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.loggedIn;return l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement("nav",null,l.a.createElement(c.b,{to:"/"},"Home"),t?l.a.createElement(c.b,{to:"/logout"},"Logout"):l.a.createElement(c.b,{to:"/login"},"Login"),l.a.createElement(c.b,{to:"/project"},"Project")),l.a.createElement(j.d,null,l.a.createElement(j.b,{path:"/signup",component:O}),l.a.createElement(j.b,{path:"/project",component:C}),l.a.createElement(j.b,{path:"/login",exact:!0,render:function(){return l.a.createElement(y,{isLoggedin:e.isLoggedin})}}),l.a.createElement(j.b,{path:"/logout",render:function(t){return l.a.createElement(I,Object.assign({},t,{logout:e.logout}))}}),l.a.createElement(F,{exact:!0,path:"/clientDashboard",component:M}),l.a.createElement(F,{exact:!0,path:"/companyDashboard",component:x}),l.a.createElement(j.b,{path:"/",exact:!0,render:function(){return l.a.createElement(y,{isLoggedin:e.isLoggedin})}}),l.a.createElement(j.b,{component:V}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(42),R=a(41),J={position:"bottom center",timeout:5e3,offset:"30px",transition:"scale"},W=function(){return l.a.createElement(z.a,Object.assign({template:R.a},J),l.a.createElement(P,null))};o.a.render(l.a.createElement(c.a,null,l.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.f11c4b93.chunk.js.map